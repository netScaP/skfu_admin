(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9aeb"],{"/r2A":function(e,t,r){},BPnw:function(e,t,r){"use strict";r.r(t);var a=r("QbLZ"),n=r.n(a),s=r("14Xm"),o=r.n(s),i=r("D3Ub"),c=r.n(i),l=r("PoRY"),u=r("SiVN"),d=r("fVKT"),p=r("hwwj"),m=(r("sJ1T"),r("aMx7")),f=r("P7iO"),h={name:"VacancyForm",components:{Markdown:m.a,AsyncSelect:f.a},mixins:[d.a,p.a],data:function(){var e=this;return{form:{title:"",description:"",specializationsIds:[]},show:!1,isEdit:!1,rules:{name:[{required:!0,message:"Введите название вакансии",trigger:"blur"}],user:[{validator:function(t,r,a){""!==r.email&&e.validateEmail(r.email)||a(new Error("Введите email владельца вакансии")),""!==r.password||e.isEdit&&!e.isNewPassword||a(new Error("Введите пароль владельца вакансии")),r.password&&r.password.length<4&&(!e.isEdit||e.isNewPassword)&&a(new Error("Пароль должен быть минимум из 4 символов")),a()},trigger:"blur"},{required:!0,trigger:"blur"}]},isNewPassword:!1}},computed:{maskedPhone:{get:function(){return new l.a("RU").input(this.form.phone)},set:function(e){var t=Object(u.a)(e);2===e.length&&"+7"!==e.substring(0,2)?this.form.phone="+7":1===e.length&&"+"!==e.substring(0,1)?this.form.phone="+7"+e:t.length>13?this.form.phone=t.substring(0,12):this.form.phone=t}}},mounted:function(){this.$route.params.id&&(this.isEdit=!0,this.fetchData())},methods:{fetchData:function(){var e=this;return c()(o.a.mark(function t(){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$apiClient.service("vacancies"),t.next=3,r.get(e.$route.params.id);case 3:a=t.sent,e.form=a;case 5:case"end":return t.stop()}},t,e)}))()},onEdit:function(){var e=this;return c()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.validateForm("ruleForm");case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",!1);case 8:return t.prev=8,t.next=11,e.confirmUpdate("Сохранить изменения вакансии?","Вакансия не изменена");case 11:t.next=16;break;case 13:return t.prev=13,t.t1=t.catch(8),t.abrupt("return",!1);case 16:return r=e.$apiClient.service("vacancies"),t.prev=17,t.next=20,r.patch(e.$route.params.id,n()({},e.form));case 20:t.next=26;break;case 22:return t.prev=22,t.t2=t.catch(17),e.$message({message:t.t2.message,type:"error"}),t.abrupt("return",!1);case 26:e.$message({message:"Вакансия изменена!",type:"success"}),e.$router.push({name:"Vacancies"});case 28:case"end":return t.stop()}},t,e,[[0,5],[8,13],[17,22]])}))()},onAdd:function(){var e=this;return c()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.validateForm("ruleForm");case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",!1);case 8:return r=e.$apiClient.service("vacancies"),t.prev=9,t.next=12,r.create(n()({},e.form));case 12:t.next=18;break;case 14:return t.prev=14,t.t1=t.catch(9),e.$message({message:t.t1.message,type:"error"}),t.abrupt("return",!1);case 18:e.$message({message:"Вакансия сохранена!",type:"success"}),e.$router.push({name:"Vacancies"});case 20:case"end":return t.stop()}},t,e,[[0,5],[9,14]])}))()},onCancel:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.confirmUpdate("Оменить изменения вакансии?","Продолжайте редактирование вакансии");case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",!1);case 8:e.$message({message:"Вакансия не изменена!",type:"warning"}),e.$router.push({name:"Vacancies"});case 10:case"end":return t.stop()}},t,e,[[0,5]])}))()},handleImageDataUrl:function(e){this.imageUrl=e},toggleShow:function(){this.show=!this.show},generatePassword:function(){this.form.user.password=""+Math.floor(1e5*Math.random())},changePassword:function(){this.isNewPassword=!0,this.$set(this.form.user,"password",null)},validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}}},v=(r("Sacd"),r("KHd+")),b=Object(v.a)(h,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.form,"label-width":"160px"}},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"title",label:"Заголовок"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"Опыт работы"}},[r("el-select",{model:{value:e.form.workingRate,callback:function(t){e.$set(e.form,"workingRate",t)},expression:"form.workingRate"}},[r("el-option",{attrs:{label:"0.5",value:"0.5"}}),e._v(" "),r("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"1.5",value:"1.5"}}),e._v(" "),r("el-option",{attrs:{label:"2",value:"2"}})],1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"Зарплата от"}},[r("el-input-number",{model:{value:e.form.salaryFrom,callback:function(t){e.$set(e.form,"salaryFrom",t)},expression:"form.salaryFrom"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"Зарплата до"}},[r("el-input-number",{model:{value:e.form.salaryTo,callback:function(t){e.$set(e.form,"salaryTo",t)},expression:"form.salaryTo"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"Рабочая ставка"}},[r("el-input-number",{model:{value:e.form.workingRate,callback:function(t){e.$set(e.form,"workingRate",t)},expression:"form.workingRate"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"Статус"}},[r("el-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-option",{attrs:{label:"Активна",value:"available"}}),e._v(" "),r("el-option",{attrs:{label:"Закрыта",value:"closed"}})],1)],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Описание"}},[r("Markdown",{attrs:{input:e.form.description},on:{"on-update":function(t){return e.form.description=t}}})],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"companyId",label:"Компании"}},[r("AsyncSelect",{attrs:{service:"companies",label:"name",value:e.form.companyId,multiple:!1},on:{"value-changed":function(t){return e.form.companyId=t}}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}})],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"specializationsIds",label:"Специализации"}},[r("AsyncSelect",{attrs:{service:"specializations",label:"name",value:e.form.specializationsIds,multiple:!0},on:{"value-changed":function(t){return e.form.specializationsIds=t}}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"cityId",label:"Город (если требуется)"}},[r("AsyncSelect",{attrs:{service:"cities",label:"name",value:e.form.cityId,multiple:!1},on:{"value-changed":function(t){return e.form.cityId=t}}})],1)],1)],1),e._v(" "),r("el-form-item",[e.isEdit?r("el-button",{attrs:{type:"primary"},on:{click:e.onEdit}},[e._v("\n        Изменить\n      ")]):e._e(),e._v(" "),e.isEdit?e._e():r("el-button",{attrs:{type:"primary"},on:{click:e.onAdd}},[e._v("\n        Cохранить\n      ")]),e._v(" "),r("el-button",{on:{click:e.onCancel}},[e._v("Отмена")])],1)],1)],1)},[],!1,null,null,null);b.options.__file="VacancyForm.vue";t.default=b.exports},Et1E:function(e,t,r){"use strict";var a=r("/r2A");r.n(a).a},P7iO:function(e,t,r){"use strict";var a=r("14Xm"),n=r.n(a),s=r("D3Ub"),o=r.n(s),i={name:"AddressSelect",props:{service:{type:String,required:!0},label:{type:String,required:!0},placeholder:{type:String,default:""},value:{type:Array|Number,default:function(){return[]}},bind:{type:Object,default:function(){return{}}}},data:function(){return{address:{},addresses:[],addressSearch:""}},watch:{value:{handler:function(e){this.address=e},deep:!0,immediate:!0}},methods:{fetchAddresses:function(){var e=this;return o()(n.a.mark(function t(){var r,a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={$limit:-1},e.addressSearch&&(r.$search=e.addressSearch),t.next=4,e.$apiClient.service(e.service).find({query:r});case 4:a=t.sent,Array.isArray(a)?e.addresses=a:e.addresses=a.data;case 6:case"end":return t.stop()}},t,e)}))()},resetAddresses:function(e){this.addressSearch=e,this.addresses=[],this.fetchAddresses()},addressChanged:function(e){this.address=e,this.$emit("value-changed",this.address)}}},c=(r("Et1E"),r("KHd+")),l=Object(c.a)(i,function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-select",e._b({attrs:{value:e.address,label:e.label,reduce:function(e){return e.id},options:e.addresses,fetchData:e.fetchAddresses,taggable:!1,clearable:!1,"infinite-loading":!1,placeholder:e.placeholder},on:{search:e.resetAddresses,input:e.addressChanged}},"v-select",e.bind,!1))},[],!1,null,null,null);l.options.__file="index.vue";t.a=l.exports},Sacd:function(e,t,r){"use strict";var a=r("hb9t");r.n(a).a},aMx7:function(e,t,r){"use strict";var a=r("LvDl"),n=r.n(a),s=r("DlQD"),o=r.n(s),i={name:"Markdown",props:{input:{type:String,default:""}},computed:{compiledMarkdown:function(){return o()(this.input,{sanitize:!0})}},methods:{update:n.a.debounce(function(e){this.$emit("on-update",e.target.value)},200)}},c=(r("nPYF"),r("KHd+")),l=Object(c.a)(i,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"editor"},[t("textarea",{domProps:{value:this.input},on:{input:this.update}}),this._v(" "),t("div",{domProps:{innerHTML:this._s(this.compiledMarkdown)}})])},[],!1,null,"7dce4b95",null);l.options.__file="index.vue";t.a=l.exports},fVKT:function(e,t,r){"use strict";var a=r("4d7F"),n=r.n(a);t.a={methods:{validateForm:function(e){var t=this;return new n.a(function(r,a){t.$refs[e].validate(function(e){e?r(e):(t.$message({message:"Данные заполнены неверно",type:"error"}),a(e))})})}}}},hNOc:function(e,t,r){},hb9t:function(e,t,r){},hwwj:function(e,t,r){"use strict";var a=r("14Xm"),n=r.n(a),s=r("D3Ub"),o=r.n(s);t.a={methods:{confirmUpdate:function(e,t){var r=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.$confirm(e,"Предупреждение",{confirmButtonText:"Да",cancelButtonText:"Нет",type:"warning"});case 3:a.next=9;break;case 5:throw a.prev=5,a.t0=a.catch(0),r.$message({message:t}),new Error(a.t0);case 9:case"end":return a.stop()}},a,r,[[0,5]])}))()}}}},nPYF:function(e,t,r){"use strict";var a=r("hNOc");r.n(a).a},sJ1T:function(e,t,r){"use strict";var a=r("QbLZ"),n=r.n(a),s=r("L2JU"),o={name:"CropUpload",components:{cropUpload:r("C03Y").a},props:{show:{type:Boolean,default:!1}},data:function(){return{fileUrl:"https://skfu.spichka.dev/api/v1/files/",componentShow:!1}},computed:n()({},Object(s.c)({token:"user/token"}),{headerInfo:function(){return{Authorization:"Bearer "+this.token}}}),watch:{show:function(){this.componentShow=this.show}},methods:{handleImageDataUrl:function(e){this.$emit("update-image-url",e)},handleAvatarSuccess:function(e){this.$emit("image-loaded",e)}}},i=r("KHd+"),c=Object(i.a)(o,function(){var e=this,t=e.$createElement;return(e._self._c||t)("crop-upload",{attrs:{width:800,height:600,url:e.fileUrl,headers:e.headerInfo,"lang-type":"ru",field:"file","img-format":"png"},on:{"crop-success":e.handleImageDataUrl,"crop-upload-success":e.handleAvatarSuccess},model:{value:e.componentShow,callback:function(t){e.componentShow=t},expression:"componentShow"}})},[],!1,null,null,null);c.options.__file="index.vue";t.a=c.exports}}]);