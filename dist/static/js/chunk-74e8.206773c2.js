(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-74e8"],{hwwj:function(e,t,a){"use strict";var n=a("14Xm"),r=a.n(n),i=a("D3Ub"),s=a.n(i);t.a={methods:{confirmUpdate:function(e,t){var a=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.$confirm(e,"Предупреждение",{confirmButtonText:"Да",cancelButtonText:"Нет",type:"warning"});case 3:n.next=9;break;case 5:throw n.prev=5,n.t0=n.catch(0),a.$message({message:t}),new Error(n.t0);case 9:case"end":return n.stop()}},n,a,[[0,5]])}))()}}}},rSqH:function(e,t,a){"use strict";a.r(t);var n=a("14Xm"),r=a.n(n),i=a("D3Ub"),s=a.n(i),c={name:"Categories",mixins:[a("hwwj").a],data:function(){return{categories:[],isLoading:!0,total:1,limit:10,page:1}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return s()(r.a.mark(function t(){var a,n,i,s,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$apiClient.service("categories"),e.isLoading=!0,n={$limit:e.limit,$skip:e.page-1?(e.page-1)*e.limit:0,$all:!0,$defaultImage:!0},t.next=5,a.find({query:n});case 5:if(i=t.sent,s=i.data,c=i.total,!(0===s.length&&e.page>1)){t.next=12;break}return e.page-=1,t.next=11,e.fetchData();case 11:return t.abrupt("return",t.sent);case 12:return e.categories=s,e.total=c,e.isLoading=!1,t.abrupt("return",!0);case 16:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.limit=e,this.fetchData()},updateActive:function(){},handleDelete:function(e){var t=this;return s()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.confirmUpdate("Точно удалить категорию?","Категория не удалена");case 3:a.next=8;break;case 5:return a.prev=5,a.t0=a.catch(0),a.abrupt("return",!1);case 8:return a.next=10,t.$apiClient.service("categories").remove(e);case 10:return t.$message({message:"Категория удалена!",type:"success"}),a.next=13,t.fetchData();case 13:return a.abrupt("return",a.sent);case 14:case"end":return a.stop()}},a,t,[[0,5]])}))()}}},l=a("KHd+"),o=Object(l.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"top-menu el-col el-col-24 el-col-xs-24 el-col-sm-24 el-col-md-24 tp-text--right mb-4"},[a("div",{staticClass:"filters"}),e._v(" "),a("div",{staticClass:"add-button"},[a("router-link",{attrs:{to:{name:"addCategory"}}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:""}})],1)],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{data:e.categories,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"Название"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"Приоритет",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.priority)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"Активный",width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{value:e.row.isAvailable,"active-color":"#13ce66","inactive-color":"#ff4949",disabled:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"Действия",width:"470"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"el-button-group"},[t.row.active?a("el-button",{attrs:{size:"small"},on:{click:function(a){e.updateActive({active:!1},t.row.id)}}},[e._v("Deactivate\n          ")]):e._e(),e._v(" "),a("router-link",{staticClass:"el-button el-button--default el-button--small",attrs:{to:{name:"editCategory",params:{id:t.row._id}},tag:"button"}},[a("i",{staticClass:"el-icon-edit"})]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleDelete(t.row._id)}}},[a("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.page,"page-size":e.limit,total:e.total,"page-sizes":[10,20,50],background:"",layout:"sizes, prev, pager, next, total"},on:{"update:currentPage":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.fetchData}})],1)},[],!1,null,null,null);o.options.__file="index.vue";t.default=o.exports}}]);