(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-eff3"],{Fs5j:function(e,t,n){"use strict";n.r(t);var a=n("14Xm"),r=n.n(a),i=n("GQeE"),l=n.n(i),s=n("D3Ub"),c=n.n(s),o={name:"Vacancies",mixins:[n("hwwj").a],data:function(){return{vacancies:[],filters:{},isLoading:!0,total:1,limit:10,page:1}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return c()(r.a.mark(function t(){var n,a,i,s,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$apiClient.service("vacancies"),e.isLoading=!0,a={$limit:e.limit,$skip:e.page-1?(e.page-1)*e.limit:0},l()(e.filters).forEach(function(t){e.filters[t]&&("salaryFrom"===t?a.salaryFrom={$gte:e.filters[t]}:"experience"===t?a.experience={$gte:e.filters[t]}:a[t]=e.filters[t])}),t.next=6,n.find({query:a});case 6:if(i=t.sent,s=i.data,c=i.total,!(0===s.length&&e.page>1)){t.next=13;break}return e.page-=1,t.next=12,e.fetchData();case 12:return t.abrupt("return",t.sent);case 13:return e.vacancies=s,e.total=c,e.isLoading=!1,t.abrupt("return",!0);case 17:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.limit=e,this.fetchData()},updateActive:function(){},handleDelete:function(e){var t=this;return c()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.confirmUpdate("Точно удалить вакансию?","Вакансия не удалена");case 3:n.next=8;break;case 5:return n.prev=5,n.t0=n.catch(0),n.abrupt("return",!1);case 8:return n.next=10,t.$apiClient.service("vacancies").remove(e);case 10:return t.$message({message:"Вакансия удалена!",type:"success"}),n.next=13,t.fetchData();case 13:return n.abrupt("return",n.sent);case 14:case"end":return n.stop()}},n,t,[[0,5]])}))()},onFilterClick:function(){this.page=1,this.fetchData()}}},u=n("KHd+"),f=Object(u.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"top-menu el-col el-col-24 el-col-xs-24 el-col-sm-24 el-col-md-24 tp-text--right mb-4"},[n("div",{staticClass:"filters"},[n("el-input",{attrs:{label:"Зарплата от",placeholder:"Зарплата от"},model:{value:e.filters.salaryFrom,callback:function(t){e.$set(e.filters,"salaryFrom",t)},expression:"filters.salaryFrom"}}),e._v(" "),n("el-input",{attrs:{placeholder:"Минимальный опыт работы"},model:{value:e.filters.experience,callback:function(t){e.$set(e.filters,"experience",t)},expression:"filters.experience"}}),e._v(" "),n("el-select",{attrs:{placeholder:"Рабочая ставка"},model:{value:e.filters.workingRate,callback:function(t){e.$set(e.filters,"workingRate",t)},expression:"filters.workingRate"}},[n("el-option",{attrs:{label:"0.5",value:"0.5"}}),e._v(" "),n("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"1.5",value:"1.5"}}),e._v(" "),n("el-option",{attrs:{label:"2",value:"2"}})],1),e._v(" "),n("el-button",{on:{click:e.onFilterClick}},[e._v("\n        Применить\n      ")])],1),e._v(" "),n("div",{staticClass:"add-button"},[n("router-link",{attrs:{to:{name:"addVacancy"}}},[n("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:""}})],1)],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{data:e.vacancies,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"Заголовок"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.title)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"Зарплата",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.salaryFrom)+"\n        -\n        "+e._s(t.row.salaryTo)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"Опыт работы",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.experience)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",fixed:"right",label:"Действия",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"el-button-group"},[n("router-link",{staticClass:"el-button el-button--default el-button--small",attrs:{to:{name:"editVacancy",params:{id:t.row.id}},tag:"button"}},[n("i",{staticClass:"el-icon-edit"})]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(n){e.handleDelete(t.row.id)}}},[n("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.page,"page-size":e.limit,total:e.total,"page-sizes":[10,20,50],background:"",layout:"sizes, prev, pager, next, total"},on:{"update:currentPage":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.fetchData}})],1)},[],!1,null,null,null);f.options.__file="index.vue";t.default=f.exports},GQeE:function(e,t,n){e.exports={default:n("iq4v"),__esModule:!0}},Mqbl:function(e,t,n){var a=n("JB68"),r=n("w6GO");n("zn7N")("keys",function(){return function(e){return r(a(e))}})},hwwj:function(e,t,n){"use strict";var a=n("14Xm"),r=n.n(a),i=n("D3Ub"),l=n.n(i);t.a={methods:{confirmUpdate:function(e,t){var n=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n.$confirm(e,"Предупреждение",{confirmButtonText:"Да",cancelButtonText:"Нет",type:"warning"});case 3:a.next=9;break;case 5:throw a.prev=5,a.t0=a.catch(0),n.$message({message:t}),new Error(a.t0);case 9:case"end":return a.stop()}},a,n,[[0,5]])}))()}}}},iq4v:function(e,t,n){n("Mqbl"),e.exports=n("WEpk").Object.keys},zn7N:function(e,t,n){var a=n("Y7ZC"),r=n("WEpk"),i=n("KUxP");e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],l={};l[e]=t(n),a(a.S+a.F*i(function(){n(1)}),"Object",l)}}}]);